!function(v,I){"use strict";var F="ht",q=v[F],l="position",N="absolute",r="px",e="left",_="top",m="innerHTML",k="className",w="width",B="height",H="0",d="▶",t="display",j="none",T="visibility",s="user-select",X="margin",o="padding",n=null,Z=q.Color,W=q.Default,f=W.getInternal(),L=v.setTimeout,V=v.setInterval,S=v.clearTimeout,b=v.clearInterval,u=v.parseInt,Y=W.isLeftButton,g=W.isDragging,P=W.startDragging,x=W.getDistance,A=W.isTouchable,z=Z.widgetIconHighlight,h=Z.widgetIconBorder,Q=Z.widgetIconGradient,p=function(){return document},M=function(D,Y){return D.querySelectorAll(Y)},$=function(k,f){var G=p().createElement(k);return"ul"===k&&(O(G,l,"relative"),O(G,X,H),O(G,o,H),O(G,"list-style",j),O(G,"box-sizing","border-box"),O(G,"-moz-box-sizing","border-box"),O(G,t,"inline-block"),O(G,"vertical-align","text-bottom"),O(G,"border","1px solid "+W.contextMenuBorderColor),O(G,"box-shadow","0 0 16px 1px "+W.contextMenuShadowColor),O(G,"overflow","hidden"),f||O(G,"border-radius",5+r)),G},D=function(z){var y=z.touches[0];return y?y:z.changedTouches[0]},K=function(){return $("div")},C=function(){return $("canvas")},O=function(W,$,w){W.style.setProperty($,w,n)},R=function(n,T,d){W.def(q.widget[n],T,d)},J=function(w,r){w.appendChild(r)},G=function($,M){$.removeChild(M)},c=function(){return p().body},i=function(F,O,o,x){F.addEventListener(O,o,!!x)},a=function(X,N,g,d){X.removeEventListener(N,g,!!d)};f.addMethod(W,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:h},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:z}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:h},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:z,gradient:W.imageGradient,gradientColor:Q,background:z}]},contextMenuLabelFont:(A?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)"},!0);var E=function(z){var O=this,V=z._view;if(O.$11b=z,O.addListeners(),i(V,"contextmenu",function(Z){Z.preventDefault()}),!A){var e=O.$37b=O.$36b.bind(O);i(V,"mouseover",e),i(V,"mouseout",e)}};W.def(E,I,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(K){if(W.preventDefault(K),Y(K)){for(var j=this,m=j.$11b,S=j.getView(),i=S.children,z=0;z<i.length;z++){var I=i[z],R=I.$24b,G=I.$25b;if(R&&R.contains(K.target))return m.scrollUp(I),j.$28b=L(function(){j.$29b=V(function(){m.scrollUp(I)},100)},500),P(j,K),void 0;if(G&&G.contains(K.target))return m.scrollDown(I),j.$28b=L(function(){j.$29b=V(function(){m.scrollDown(I)},100)},500),P(j,K),void 0}A&&(K=D(K)),j.$30b={x:K.pageX,y:K.pageY}}},handle_mousedown:function(P){this.handle_touchstart(P)},handle_touchend:function($){if(Y($)){var Q=this,M=Q.$30b,Z=A?{x:D($).pageX,y:D($).pageY}:{x:$.pageX,y:$.pageY};if(!M||x(M,Z)>1)return delete Q.$30b,void 0;for(var P=Q.getView(),K=Q.$11b,b=$.target,m=n,d=n,e=K._items,T=P.$26b,i=0;i<T.length;i++)if(d=T[i],d.contains(b)){m=d.getAttribute("data-id");break}if(m&&e){var r=K.$17b(e,function(T){return T._id===m});if(r){var X=!1;r.disabled instanceof Function?X=r.disabled.call(K,r):r.disabled===!0&&(X=!0),X||(r.items?A&&Q.$36b(d,!0):K.$1b(r,$))}}delete Q.$30b}},$36b:function(S,u){if(!g()){var A,h=this,V=h.$11b,R=h.getView(),y=V.$20b||R.children[0],C=V.$19b,G=R.$26b,f=R.children,Y=S.target,L=R.getBoundingClientRect(),F=W.getWindowInfo(),K=F.width,x=F.height,H=function(H){for(var s=0;s<f.length;s++){var A=f[s],I=new RegExp(H+"$"),y=A[k];if(y&&(I.test(y)||y.indexOf(H+" ")>=0))return A}},c=function(r){for(var B=0;B<G.length;B++){var U=G[B],J=new RegExp(r+"$"),c=U[k];if(c&&(J.test(c)||c.indexOf(r+" ")>=0))return U}},$=function(N){var y=c("menu-item"+N.$45b),d=y.getBoundingClientRect(),U=d.top-L.top,M=d.left-L.left;O(N,_,U+r),O(N,e,M+d.width+r);var Q=N.getBoundingClientRect(),G=Q.top,C=Q.left,j=Q.height,n=Q.width,s=G+j+2,t=C+n+2;s>x&&O(N,_,U+x-s+r),t>K&&O(N,e,M-n+r)};if(u)A=S;else{if("mouseover"===S.type){for(var N=0;N<G.length;N++){var v=G[N];if(v.contains(Y)){A=v;break}}if(!A&&C){var t=C.parentNode,p=H("submenu"+C.getAttribute("data-id"));(p&&p.contains(Y)||t&&t.contains(Y))&&(A=C)}}else if("mouseout"===S.type){for(var Z=!1,U=S.relatedTarget,N=0;N<f.length;N++){var b=f[N];if("hidden"!==b.style.visibility&&b.contains(U)){Z=!0;break}}if(Z)return}!A&&y&&(A=c("menu-item"+(y.$45b||"NaN")))}if(A!=C){if(C)for(var d=C;d;){d[k]=d[k].replace(" menu-item-hover",""),d[k].indexOf("disabled")<0&&(O(d,"background-color",W.contextMenuBackground),O(d,"color",W.contextMenuLabelColor));var j=H("submenu"+d.getAttribute("data-id"));j&&O(j,T,"hidden");var q=d.parentNode;d=c("menu-item"+(q.$45b||"NaN"))}if(A){for(var P=A,M=[];P;){P[k]+=" menu-item-hover",P[k].indexOf("disabled")<0&&(O(P,"background-color",W.contextMenuHoverBackground),O(P,"color",W.contextMenuHoverLabelColor));var D=H("submenu"+P.getAttribute("data-id"));D&&(O(D,T,"visible"),M.push(D));var q=P.parentNode;P=c("menu-item"+(q.$45b||"NaN"))}M.reverse(),M.forEach(function(K){$(K)})}}V.$19b=A,V.$20b=A?A.parentNode:R.children[0]}},handle_mouseup:function(k){this.handle_touchend(k)},handleWindowTouchEnd:function(){var j=this;j.$28b!=n&&(S(j.$28b),delete j.$28b),j.$29b!=n&&(b(j.$29b),delete j.$29b),delete j.$34b,delete j.$30b,delete j.$35b},handleWindowMouseUp:function(W){this.handleWindowTouchEnd(W)},handle_mousemove:function(H){this.handle_touchmove(H)},handle_touchmove:function(u){if(!g()&&Y(u)){for(var J=this,K=J.getView().children,s=n,v=0;v<K.length;v++){var p=K[v];if(p.contains(u.target)){s=p;break}}var Z=J.$30b,E=A?{x:D(u).pageX,y:D(u).pageY}:{x:u.pageX,y:u.pageY};s&&Z&&x(Z,E)>2&&(P(J,u),J.$34b=s,J.$35b=s.$18b)}},handleWindowTouchMove:function(M){var q=this,Y=q.$11b,o=q.$34b,O=q.$35b,b=q.$30b;if(b&&o){var K=A?{x:D(M).pageX,y:D(M).pageY}:{x:M.pageX,y:M.pageY},C=K.y-b.y;C>0?Y.scrollUp(o,o.$18b-(O-C)):Y.scrollDown(o,O-C-o.$18b)}},handleWindowMouseMove:function(_){this.handleWindowTouchMove(_)},$10b:function(I,P){I.preventDefault();for(var i=this,R=i.getView().children,q=n,C=0;C<R.length;C++){var b=R[C];if(b.contains(I.target)){q=b;break}}if(q){var O=this.$11b,$=O.getRowHeight();Math.abs(P)>.05&&(P>0?O.scrollUp(q,P*$):0>P&&O.scrollDown(q,-P*$))}},handle_mousewheel:function(P){this.$10b(P,P.wheelDelta/40)},handle_DOMMouseScroll:function(g){this.$10b(g,-g.detail)},$44b:function(X){this.getView().contains(X.target)||this.$11b.hide()},$41b:function(W){this.$11b.show(W)},$4b:function(m,D){var j=this.$11b;if(D=D||j._items,D&&D.length&&m.keyCode){var u=[m.keyCode];m.shiftKey&&u.push(16),m.ctrlKey&&u.push(17),m.altKey&&u.push(18),/mac/.test(v.navigator?v.navigator.userAgent.toLowerCase():"")?m.metaKey&&u.push(17):m.metaKey&&u.push(91),u.sort();var S=u.join(),n=j.$17b(D,function(i){if(i.key){var y=i.key.slice(0);return y.sort(),S===y.join()}});if(n){n.preventDefault!==!1&&m.preventDefault();var Z=!1;n.disabled instanceof Function?Z=n.disabled.call(j,n):n.disabled===!0&&(Z=!0),Z||j.$1b(n,m)}}},$39b:function(e){var s=this,$=D(e);s.$32b={x:$.pageX,y:$.pageY}},$38b:function(s){var t=this,f=D(s);t.$31b={x:f.pageX,y:f.pageY},t.$33b=L(function(){t.$31b&&(t.$32b?x(t.$31b,t.$32b)<10&&t.$11b.show(s):t.$11b.show(s)),delete t.$33b,delete t.$31b,delete t.$32b},600)},$40b:function(){var Z=this;Z.$33b!=n&&(S(Z.$33b),delete Z.$33b,delete Z.$31b,delete Z.$32b)}}),q.widget.ContextMenu=function(T){var p=this,z=p._view=K();z[k]="ht-widget-contextmenu",p.setItems(T),p.$13b=new E(p),O(z,"font",W.contextMenuLabelFont),O(z,l,N),O(z,"cursor","default"),O(z,"-webkit-"+s,j),O(z,"-moz-"+s,j),O(z,"-ms-"+s,j),O(z,s,j),O(z,"box-sizing","border-box"),O(z,"-moz-box-sizing","border-box"),W.baseZIndex!=n&&O(z,"z-index",u(W.baseZIndex)+2+""),p.$3b=function(O){p.$13b.$4b(O)}},R("ContextMenu",I,{$5b:0,_items:n,$21b:n,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var l=this,q=l._enableGlobalKey;q===!1&&(i(p(),"keydown",l.$3b),l._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,a(p(),"keydown",this.$3b)},setItems:function(c){this._items=c},setVisibleFunc:function(I){this.$16b=I},setLabelMaxWidth:function(K){this.$43b=K},$1b:function(W,F){var o=this;if("check"===W.type)W.selected=!W.selected;else if("radio"===W.type){var M=W.groupId;o.$17b(o._items,function(Q){Q.groupId===M&&(Q.selected=!1)}),W.selected=!0}if(o.hide(),W.action)W.action.apply(W.scope||o,[W,F]);else if(W.href){var E=W.linkTarget||"_self";v.open(W.href,E)}},getItemByProperty:function($,E,k){var u=this;if(k=k||u._items,!k||0===k.length)return n;var U=u.$17b(k,function(H){return H[$]===E});return U||n},scrollUp:function(N,$){var r=this;if($=$==n?20:$,$=u($),0!==$){var M=0;N.$18b>$&&(M=N.$18b-$),r.$42b(N,M),N.scrollTop=M,N.$18b=M}},scrollDown:function(N,o){var w=this;if(o=o==n?20:o,o=u(o),0!==o){var q=N.$22b,_=N.$23b,j=q-_;_+N.$18b+o<q&&(j=N.$18b+o),w.$42b(N,j),N.scrollTop=j,N.$18b=j}},$42b:function(f,M){M=M==n?f.$18b:M;var P=f.$24b,R=f.$25b;P&&(O(P,"top",M+r),0==M?O(P,t,j):O(P,t,"block")),R&&(O(R,"bottom",-M+r),M==f.$22b-f.$23b?O(R,t,j):O(R,t,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(w,W){for(var q=0;q<w.length;q++){var U=w[q];if(W(U))return U;if(U.items){var E=this.$17b(U.items,W);if(E)return E}}},$2b:function(s,e){for(var v=this,H=0;H<s.length;H++){v.$5b++;var h=s[H];if(!v.$16b||v.$16b.call(v,h)){var c=$("li"),i=v.$5b+"";if(O(c,"white-space","nowrap"),O(c,t,"block"),"separator"===h){var z=K();z[k]="separator",O(z,B,W.contextMenuSeparatorWidth+r),O(z,"background",W.contextMenuSeparatorColor),J(c,z)}else{h._id=i,c.setAttribute("data-id",i);var j=$("span"),D=$("span"),Y=C(),R=K();if(O(j,t,"inline-block"),O(D,t,"inline-block"),Y[k]="prefix",O(Y,t,"inline-block"),O(Y,w,"1em"),O(Y,B,"1em"),O(Y,"vertical-align","middle"),O(Y,X,"0 0.2em"),"check"===h.type&&h.selected?Y[k]+=" check-prefix":"radio"===h.type&&h.selected&&(Y[k]+=" radio-prefix"),J(c,Y),h.icon){var V=C();V[k]="contextmenu-item-icon",O(V,t,"inline-block"),O(V,"vertical-align","middle"),O(V,B,"1.2em"),O(V,w,"1.2em"),O(V,"margin-right","0.2em"),V.$50b=h.icon,J(j,V)}if(D[m]=h.label,J(j,D),J(c,j),R[k]="suffix",O(R,t,"inline-block"),O(R,"margin-left","1em"),O(R,"margin-right","0.4em"),O(R,"text-align","right"),O(R,"font-size","75%"),h.items&&(R[m]=d),h.suffix&&(R[m]=h.suffix),J(c,R),c[k]="menu-item menu-item"+i,O(c,"background-color",W.contextMenuBackground),O(c,"color",W.contextMenuLabelColor),O(c,o,"3px 0"),h.disabled instanceof Function){var G=h.disabled.call(v,h);G&&(c[k]+=" disabled",O(c,"color",W.contextMenuDisabledLabelColor))}else h.disabled&&(c[k]+=" disabled",O(c,"color",W.contextMenuDisabledLabelColor));if(h.items){v.$21b||(v.$21b=new q.List);var Z=$("ul",v._r);Z[k]="submenu"+i,Z.$45b=i,O(Z,T,"hidden"),O(Z,l,N),J(v._view,Z),v.$21b.add(Z),v.$2b(h.items,Z)}}J(e,c)}}},rebuild:function(){var Z=this,M=Z._items,e=Z._view;if(e&&(e[m]="",Z.$21b=n,Z.$5b=0,Z.$19b=n,Z.$20b=n,e.$26b=n,M&&0!==M.length)){var E=$("ul",Z._r);J(e,E),Z.$2b(M,E)}},addTo:function(d){if(d){var k=this,f=k.$13b;if(k.$12b=d,k.$9b=function(P){f.$44b(P)},k.$27b=function(U){f.$41b(U)},A){var s=k.$6b=function(n){f.$38b(n)},w=k.$7b=function(u){f.$39b(u)},U=k.$8b=function(X){f.$40b(X)};i(d,"touchstart",s,!0),i(d,"touchmove",w),i(d,"touchend",U)}else i(d,"contextmenu",k.$27b)}},show:function(j,d,v){var Z=this,v=v==n?!0:!1,q=Z._view;if(q){if(Z.invalidate(),1===arguments.length){var y=j;if(A){var S=D(y);j=S.pageX,d=S.pageY}else j=y.pageX,d=y.pageY}var f=W.getWindowInfo(),Y=f.width,V=f.height,b=f.left,h=f.top,s={pageX:j,pageY:d,clientX:j-b,clientY:d-h,target:1,originEvent:y},C=s.clientX,T=s.clientY,I=function(d){d.style.height=V-6+r;var g=K(),f=K(),i=function(R){O(R,l,N),O(R,"text-align","center"),O(R,w,"100%"),O(R,"font-size",10+r),O(R,"padding","2px 0"),O(R,"border","0px solid "+W.contextMenuScrollerBorderColor),O(R,"background-color",W.contextMenuScrollerColor1),R.style.backgroundImage="-webkit-linear-gradient(top, "+W.contextMenuScrollerColor1+", "+W.contextMenuScrollerColor2+")",R.style.backgroundImage="linear-gradient(to bottom, "+W.contextMenuScrollerColor1+", "+W.contextMenuScrollerColor2+")"};g[k]="menu-arrow-item menu-arrow-item-top",f[k]="menu-arrow-item menu-arrow-item-bottom",i(g),O(g,"top",H),O(g,"left",H),O(g,"border-bottom-width",1+r),g[m]="▲",i(f),O(f,"bottom",H),O(f,"left",H),O(f,"border-top-width",1+r),f[m]="▼",d.$24b=g,d.$25b=f,d.$18b=d.scrollTop,d.$22b=d.scrollHeight,d.$23b=d.clientHeight,J(d,g),J(d,f),Z.$42b(d)};Z.beforeShow&&Z.beforeShow(s);var X=Z._items;if(X&&(y&&y.preventDefault(),X.length)){Z.rebuild(),J(c(),q),q.$26b=M(q,".menu-item");var $=q.children[0];$.offsetHeight>V&&I($);var P=T+(v?1:0),u=C+(v?1:0),E=function(i){for(var B=0,R=0,n=0,q=Z.$43b;n<i.children.length;n++){var A=i.children[n];if(A.getAttribute("data-id")){var v=A.children[1],Q=A.children[2],E=v.children;if(q){var N=E[0];E.length>1&&(N=E[1]),N.offsetWidth>q&&(N[m]="<marquee scrollamount='3'>"+N[m]+"</marquee>",N.children[0].style.verticalAlign="text-bottom",O(N,w,q+r),O(N,t,"inline-block"))}var f=v.offsetWidth,C=Q.offsetWidth;f>B&&(B=f),C>R&&(R=C)}}for(n=0;n<i.children.length;n++){var A=i.children[n];if(A.getAttribute("data-id")){var v=A.children[1],Q=A.children[2],L=v.children[0],j=v.children[1];!j&&L.style.width&&O(L,w,B+r),O(v,w,B+r),O(Q,w,R+r)}}};E($);var F=T+3+q.offsetHeight,R=C+3+q.offsetWidth;F>V?O(q,_,P-(F-V)+h+r):O(q,_,P+h+r),R>Y?O(q,e,u-(R-Y)+b+r):O(q,e,u+b+r);var a=Z.$21b;a&&a.each(function(M){E(M),M.offsetHeight>V&&I(M)}),Z.$9b&&i(p(),A?"touchstart":"mousedown",Z.$9b,!0),Z.afterShow&&Z.afterShow(s),Z.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=n:!1},getRelatedView:function(){return this.$12b},hide:function(){var n=this,D=n._view;D&&D.parentNode&&(G(D.parentNode,D),a(p(),A?"touchstart":"mousedown",n.$9b,!0),n.afterHide&&n.afterHide())},dispose:function(){var p=this,V=p.$12b,L=p._view;L&&(L.parentNode&&G(L.parentNode,L),p.disableGlobalKey(),V&&(A?(a(V,"touchstart",p.$6b,!0),a(V,"touchmove",p.$7b),a(V,"touchend",p.$8b)):a(V,"contextmenu",p.$27b)),p._view=p._items=p.$21b=p.$19b=p.$12b=p.beforeShow=p.afterShow=p.afterHide=p.$9b=p.$3b=p.$6b=p.$7b=p.$8b=p.$27b=n)},$46b:function(F,E,R,O){var M=f.initContext(F);f.translateAndScale(M,0,0,1),M.clearRect(0,0,R,O),W.drawStretchImage(M,W.getImage(E),"fill",0,0,R,O),M.restore()},$47b:function(){var K,d,k,p=this,v=p._view;if(p.isShowing()){var m=M(v,".check-prefix");for(k=0;k<m.length;k++){var r=m[k];K=r.clientWidth,d=r.clientHeight,r.$48b=K,r.$49b=d,f.setCanvas(r,K,d)}var w=M(v,".radio-prefix");for(k=0;k<w.length;k++){var e=w[k];K=e.clientWidth,d=e.clientHeight,e.$48b=K,e.$49b=d,f.setCanvas(e,K,d)}var G=M(v,".contextmenu-item-icon");for(k=0;k<G.length;k++){var o=G[k];K=o.clientWidth,d=o.clientHeight,o.$48b=K,o.$49b=d,f.setCanvas(o,K,d)}}},validateImpl:function(){var e,x,G,Q=this,H=Q._view;if(Q.isShowing()){var O=M(H,".check-prefix");for(G=0;G<O.length;G++){var D=O[G];e=D.$48b,x=D.$49b,e&&x&&Q.$46b(D,W.contextMenuCheckIcon,e,x)}var C=M(H,".radio-prefix");for(G=0;G<C.length;G++){var L=C[G];e=L.$48b,x=L.$49b,e&&x&&Q.$46b(L,W.contextMenuRadioIcon,e,x)}var q=M(H,".contextmenu-item-icon");for(G=0;G<q.length;G++){var o=q[G];e=o.$48b,x=o.$49b,e&&x&&Q.$46b(o,W.getImage(o.$50b),e,x)}}}})}(this,Object);